<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POS - PharmaSys</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
    --primary:#1E88E5;
    --sidebar-width:260px;
}

body{
    font-family:'Inter',sans-serif;
    background:#F8F9FB;
}

.logo-text{ font-family:'Poppins',sans-serif; }

.sidebar{
    width:var(--sidebar-width);
    height:100vh;
    position:fixed;
    background:#fff;
    border-right:1px solid #dee2e6;
}

.nav-link{
    color:#555;
    padding:12px 20px;
    border-radius:8px;
    margin:4px 15px;
}

.nav-link.active{
    background:var(--primary);
    color:#fff !important;
}

.main-content{
    margin-left:var(--sidebar-width);
    padding:20px;
}

.qty-input{ width:70px; }
.cart-scroll{ max-height:350px; overflow-y:auto; }
.remove-btn{ cursor:pointer; color:#dc3545; }
.modal.show{ display:block; background:rgba(0,0,0,0.5); }
</style>
</head>

<body>

<!-- LOGIN CHECK -->
<script>
const user = JSON.parse(localStorage.getItem("user"));
if(!user) window.location.href="login.html";
</script>

<!-- SIDEBAR -->
<div class="sidebar d-flex flex-column shadow-sm">
    <div class="p-4">
        <h4 class="logo-text text-primary m-0">ðŸ’Š PharmaSys</h4>
    </div>

    <nav class="nav flex-column flex-grow-1">
        <a class="nav-link" href="dashboard.html">Dashboard</a>
        <a class="nav-link active" href="pos.html">POS</a>
        <a class="nav-link" href="medicine.html">Medicines</a>
        <a class="nav-link" href="inventory.html">Inventory</a>
        <a class="nav-link" href="employee.html">Employees</a>
        <a class="nav-link" href="settings.html">Settings</a>
    </nav>

    <div class="p-3 border-top">
        <button onclick="logout()" class="btn btn-outline-danger w-100">Logout</button>
    </div>
</div>

<!-- MAIN CONTENT -->
<div class="main-content">

<!-- HEADER -->
<nav class="navbar navbar-light bg-white shadow-sm rounded px-4 mb-3">
    <span class="navbar-brand logo-text fw-bold">POS</span>
    <span class="text-muted">User: <strong>${user.username}</strong></span>
</nav>

<div class="row">

<!-- MEDICINES -->
<div class="col-md-8">
    <input class="form-control mb-3" id="searchInput" placeholder="Search medicine by name">

    <div class="card shadow-sm">
        <table class="table mb-0">
            <thead class="table-light">
                <tr>
                    <th>Medicine</th>
                    <th>Batch</th>
                    <th>Stock</th>
                    <th>Price</th>
                    <th>Qty</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="medicineTable"></tbody>
        </table>
    </div>
</div>

<!-- CART -->
<div class="col-md-4">
<div class="card shadow-sm p-3">
    <div class="d-flex justify-content-between mb-2">
        <h5 class="logo-text">Current Cart</h5>
        <span class="badge bg-primary" id="cartCount">0</span>
    </div>

    <div id="cartBody" class="cart-scroll text-muted text-center">
        Cart is empty
    </div>

    <hr>

    <div class="d-flex justify-content-between">
        <span>Subtotal</span>
        <strong id="subtotal">Rs. 0.00</strong>
    </div>

    <div class="d-flex justify-content-between">
        <span>Discount (5%)</span>
        <strong class="text-danger" id="discount">- Rs. 0.00</strong>
    </div>

    <hr>

    <div class="d-flex justify-content-between fs-5 fw-bold text-primary">
        <span>Total</span>
        <span id="total">Rs. 0.00</span>
    </div>

    <div class="row g-2 mt-3">
        <div class="col-6">
            <button class="btn btn-outline-primary w-100" onclick="printInvoice()" id="printBtn" disabled>
                <i class="bi bi-printer"></i> Print
            </button>
        </div>
        <div class="col-6">
            <button class="btn btn-success w-100" onclick="payNow()" id="payBtn" disabled>
                <i class="bi bi-wallet2"></i> Pay Now
            </button>
        </div>
    </div>
</div>
</div>

</div>
</div>

<!-- THANK YOU MODAL -->
<div id="thankYouModal" class="modal">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content text-center p-4">
    <i class="bi bi-check-circle-fill text-success fs-1"></i>
    <h4 class="mt-3 fw-bold">Thank You!</h4>
    <p>Your purchase was completed successfully.</p>
    <button class="btn btn-primary" onclick="closeThankYou()">OK</button>
</div>
</div>
</div>

<script>
function logout(){
    localStorage.removeItem("user");
    window.location.href="login.html";
}
</script>

</body>
</html>
